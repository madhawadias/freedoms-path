<app-nav-bar></app-nav-bar>
<table id="example" class="table table-striped table-bordered" style="zoom: 65%">
  <thead>
  <tr align="center">
    <th colspan="4"></th>
    <th colspan="3">Task 1</th>
    <th colspan="3">Task 2</th>
    <th colspan="3">Task 3</th>
    <th colspan="3">Total</th>
  </tr>
  <tr>
    <th>Team</th>
    <th>Mission</th>
    <th>Start Time</th>
    <th>End Time</th>
    <th>Questions Done</th>
    <th>Hints Taken</th>
    <th>Time Left</th>
    <th>Questions Done</th>
    <th>Hints Taken</th>
    <th>Time Left</th>
    <th>Questions Done</th>
    <th>Hints Taken</th>
    <th>Time Left</th>
    <th>Questions Done</th>
    <th>Hints Taken</th>
    <th>Time Left</th>
<!--    <th>Points</th>-->
  </tr>
  </thead>
  <tbody>
  <tr *ngFor="let raw of teamsData | keyvalue">
    <td>{{raw.value.name}} <br> {{raw.value.points}}</td>
    <td class="p-0">
      <tr *ngFor="let mission of raw.value.missions"><td>{{mission.name}}</td></tr>
    </td>

    <td class="p-0">
      <tr *ngFor="let mission of raw.value.missions | keyvalue">
        <td><input #inputTime type="time" value="{{mission.value.startTime}}"
                   (change)="updateTime(raw.key,mission.key,'startTime',inputTime.value)"></td>
      </tr>
    </td>
    <td class="p-0">
      <tr *ngFor="let mission of raw.value.missions | keyvalue">
        <td><input #inputTimeEnd type="time" value="{{mission.value.endTime}}"
                   (change)="updateTime(raw.key,mission.key,'endTime',inputTimeEnd.value)"></td>
      </tr>
    </td>
    <td class="p-0">
      <tr *ngFor="let mission of raw.value.missions | keyvalue">
        <td class="p-0">
          <button class="btn btn-danger"
                  (click)="updateQuestions(raw.key,mission.key,0,mission.value.task[0].questions-1)">-</button></td>
        <td>{{mission.value.task[0].questions}}</td>
        <td class="p-0">
          <button class="btn btn-success"
                  (click)="updateQuestions(raw.key,mission.key,0,mission.value.task[0].questions+1)">+</button></td>
      </tr>
    </td>
    <td class="p-0">
      <tr *ngFor="let mission of raw.value.missions | keyvalue">
        <td class="p-0">
          <button class="btn btn-danger"
                  (click)="updateHints(raw.key,mission.key,0,mission.value.task[0].hints-1)">-</button></td>
        <td>{{mission.value.task[0].hints}}</td>
        <td class="p-0">
          <button class="btn btn-success"
                  (click)="updateHints(raw.key,mission.key,0,mission.value.task[0].hints+1)">+</button></td>
      </tr>
    </td>
    <td class="p-0"></td>
    <td class="p-0">
      <tr *ngFor="let mission of raw.value.missions | keyvalue">
        <td class="p-0">
          <button [disabled]="mission.value.name == 'Explorer'" class="btn btn-danger"
                  (click)="updateQuestions(raw.key,mission.key,1,mission.value.task[1].questions-1)">-</button></td>
        <td>{{mission.value.task[1].questions}}</td>
        <td class="p-0">
          <button [disabled]="mission.value.name == 'Explorer'" class="btn btn-success"
                  (click)="updateQuestions(raw.key,mission.key,1,mission.value.task[1].questions+1)">+</button></td>
      </tr>
    </td>
    <td class="p-0">
      <tr *ngFor="let mission of raw.value.missions | keyvalue">
        <td class="p-0">
          <button [disabled]="mission.value.name == 'Explorer'" class="btn btn-danger"
                  (click)="updateHints(raw.key,mission.key,1,mission.value.task[1].hints-1)">-</button></td>
        <td>{{mission.value.task[1].hints}}</td>
        <td class="p-0">
          <button [disabled]="mission.value.name == 'Explorer'" class="btn btn-success"
                  (click)="updateHints(raw.key,mission.key,1,mission.value.task[1].hints+1)">+</button></td>
      </tr>
    </td>
    <td class="p-0"></td>
    <td class="p-0">
      <tr *ngFor="let mission of raw.value.missions | keyvalue">
        <td class="p-0">
          <button [disabled]="mission.value.name == 'Explorer'" class="btn btn-danger"
                  (click)="updateQuestions(raw.key,mission.key,2,mission.value.task[2].questions-1)">-</button></td>
        <td>{{mission.value.task[2].questions}}</td>
        <td class="p-0">
          <button [disabled]="mission.value.name == 'Explorer'" class="btn btn-success"
                  (click)="updateQuestions(raw.key,mission.key,2,mission.value.task[2].questions+1)">+</button></td>
      </tr>
    </td>
    <td class="p-0">
      <tr *ngFor="let mission of raw.value.missions | keyvalue">
        <td class="p-0">
          <button [disabled]="mission.value.name == 'Explorer'" class="btn btn-danger"
                  (click)="updateHints(raw.key,mission.key,2,mission.value.task[2].hints-1)">-</button></td>
        <td>{{mission.value.task[2].hints}}</td>
        <td class="p-0">
          <button [disabled]="mission.value.name == 'Explorer'" class="btn btn-success"
                  (click)="updateHints(raw.key,mission.key,2,mission.value.task[2].hints-1)">+</button></td>
      </tr>
    </td>
    <td class="p-0"></td>
    <td class="p-0">
      <tr *ngFor="let mission of raw.value.missions">
        <td>{{mission.task[0].questions+mission.task[1].questions+mission.task[2].questions}}</td>
      </tr>
    </td>
    <td class="p-0">
      <tr *ngFor="let mission of raw.value.missions">
        <td>{{mission.task[0].hints+mission.task[1].hints+mission.task[2].hints}}</td>
      </tr>
    </td>
    <td class="p-0"></td>
<!--    <td class="p-0">-->
<!--      <tr>-->
<!--        <td>{{raw.value.points}}</td>-->
<!--      </tr>-->
<!--    </td>-->
  </tr>

  </tbody>

</table>
